@using ODK.Payments;
@using ODK.Umbraco.Payments;
@model PaymentModel
@{
    PaymentProviderType provider;
    if (!Enum.TryParse<PaymentProviderType>(Model.Provider, out provider))
    {
        return;
    }

    string amount = string.Format("{0}{1:0.00}", Model.CurrencySymbol, Model.Amount);
}

@if (provider == PaymentProviderType.Stripe)
{
    var htmlAttributes = new
    {
        data_api_key = Model.ApiPublicKey,
        @class = "js-stripe-form"
    };

    using (Html.BeginUmbracoForm("Create", "Stripe", null, htmlAttributes, FormMethod.Post))
    {
        <input type="hidden" class="js-stripe-token" name="stripeToken" />

        <div class="form-row">
            <label for="card-element-@Model.Id">
                Credit or debit card
            </label>
            <div id="card-element-@Model.Id" class="js-card-element">
                <!-- A Stripe Element will be inserted here. -->
            </div>

            <!-- Used to display form errors. -->
            <div class="js-card-errors" role="alert"></div>
        </div>
        <span>@amount</span>
        <button>Submit Payment</button>
    }
}